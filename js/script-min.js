var modal_contact_us=document.querySelector(".modal--contact-us"),modal_map=document.querySelector(".modal--our-location"),modal_cart_confirm=document.querySelector(".modal--add-to-cart"),services=document.querySelector(".services");function contact_us_init(e){var t=document.querySelector(".main-contacts__callback-button"),o=e.querySelector(".contact-us-form"),r=e.querySelector(".modal--contact-us .modal__button--close"),s=e.querySelector(".contact-us-form__username"),l=e.querySelector(".contact-us-form__email"),a=e.querySelector(".contact-us-form__comment");e.querySelector(".contact-us-form__button--submit");if(t){var i=!0,c=null,n=null;try{c=localStorage.getItem("name"),n=localStorage.getItem("email")}catch(e){i=!1}t.addEventListener("click",(function(e){e.preventDefault(),modal_contact_us.classList.add("modal--show"),i&&null!=c&&null!=n?(s.value=c,l.value=n,a.focus()):s.focus()}))}r&&r.addEventListener("click",(function(e){e.preventDefault(),contact_us_close(modal_contact_us)})),o&&(s.removeAttribute("required"),l.removeAttribute("required"),a.removeAttribute("required"),o.addEventListener("submit",(function(e){e.preventDefault(),i&&s.value&&l.value&&a.value?(localStorage.setItem("name",s.value),localStorage.setItem("email",l.value),contact_us_close(modal_contact_us)):(s.value||(s.classList.remove("modal--error"),modal_contact_us.offsetWidth=modal_contact_us.offsetWidth,s.classList.add("modal--error"),s.focus()),l.value||(l.classList.remove("modal--error"),modal_contact_us.offsetWidth=modal_contact_us.offsetWidth,l.classList.add("modal--error")),a.value||(a.classList.remove("modal--error"),modal_contact_us.offsetWidth=modal_contact_us.offsetWidth,a.classList.add("modal--error")))})))}function contact_us_close(e){var t=e.querySelector(".contact-us-form__username"),o=e.querySelector(".contact-us-form__email"),r=e.querySelector(".contact-us-form__comment");modal_close(e),t.classList.contains("modal--error")&&t.classList.remove("modal--error"),o.classList.contains("modal--error")&&o.classList.remove("modal--error"),r.classList.contains("modal--error")&&r.classList.remove("modal--error")}function map_modal_init(e){var t=document.querySelector(".main-contacts__map-link"),o=e.querySelector(".modal--our-location .modal__button--close");t&&t.addEventListener("click",(function(t){t.preventDefault(),e.classList.add("modal--show")})),o&&o.addEventListener("click",(function(t){t.preventDefault(),modal_close(e)}))}function cart_confirm_init(e){var t=e.querySelector(".modal--add-to-cart .modal__button--close"),o=document.querySelectorAll(".products-list__button--buy"),r=e.querySelector(".modal__button--continue");if(o)for(var s=0;s<o.length;s++)o[s].addEventListener("click",(function(e){e.preventDefault(),modal_cart_confirm.classList.add("modal--show")}));t&&t.addEventListener("click",(function(e){e.preventDefault(),modal_close(modal_cart_confirm)})),r&&r.addEventListener("click",(function(e){e.preventDefault(),modal_close(modal_cart_confirm)}))}function services_init(e){for(var t=e.querySelectorAll(".services-list__button"),o=e.querySelectorAll(".services-description__item"),r=0;r<t.length;r++)t[r].addEventListener("click",(function(r){var s=e.querySelector(".services-list__button--active");s&&s.classList.remove("services-list__button--active"),r.target.classList.add("services-list__button--active");var l=e.querySelector(".services-description__item--show");for(l&&l.classList.remove("services-description__item--show"),m=0;m<t.length;m++)t[m].classList.contains("services-list__button--active")&&o[m].classList.add("services-description__item--show")}))}function modal_close(e){e.classList.add("modal--close"),setTimeout((function(){e.classList.contains("modal--show")&&e.classList.remove("modal--show"),e.classList.contains("modal--close")&&e.classList.remove("modal--close")}),490)}modal_contact_us&&contact_us_init(modal_contact_us),modal_map&&map_modal_init(modal_map),modal_cart_confirm&&cart_confirm_init(modal_cart_confirm),services&&services_init(services),window.addEventListener("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),modal_contact_us&&modal_contact_us.classList.contains("modal--show")&&modal_close(modal_contact_us),modal_map&&modal_map.classList.contains("modal--show")&&modal_close(modal_map),modal_cart_confirm&&modal_cart_confirm.classList.contains("modal--show")&&modal_close(modal_cart_confirm))}));try{ymaps.ready((function(){var e=new ymaps.Map("map",{center:[59.938635,30.323118],zoom:18,controls:["zoomControl","routeButtonControl"]}),t=ymaps.templateLayoutFactory.createClass('<div style="color: #9e1708; background-color: #ffffff; border-radius: 5px;padding:5px; font-weight: bold; width: 130px; text-align: left; opacity: 90%">$[properties.iconContent]</div>'),o=new ymaps.Placemark([59.938635,30.323118],{iconContent:"Большая Конюшенная ул., 19",hintContent:"Большая Конюшенная ул., 19"},{iconLayout:"default#imageWithContent",iconImageHref:"img/map-marker.png",iconImageSize:[22,44],iconImageOffset:[-11,-44],iconContentOffset:[28,22],iconContentLayout:t});e.geoObjects.add(o)}))}catch{console.log("Yandex maps is not defined at this page")}var slides,marker_items,marker_buttons,previous_button,next_button,slider_interval,slider=document.querySelector(".slider"),current_slide_index=1;const SLIDE_SPEED=5e3;function slider_init(){slides=slider.querySelectorAll(".slider-list__item"),marker_items=slider.querySelectorAll(".slider__markers-item"),marker_buttons=slider.querySelectorAll(".slider__marker-button"),previous_button=slider.querySelector(".slider__button--previous"),next_button=slider.querySelector(".slider__button--next"),slider_interval=setInterval(next_slide,SLIDE_SPEED),next_button.addEventListener("click",(function(e){e.preventDefault(),clearInterval(slider_interval),next_slide(),slider_interval=setInterval(next_slide,SLIDE_SPEED)})),previous_button.addEventListener("click",(function(e){e.preventDefault(),clearInterval(slider_interval),previous_slide(),slider_interval=setInterval(next_slide,SLIDE_SPEED)}));for(var e=0;e<marker_buttons.length;e++)marker_buttons[e].addEventListener("click",clickHandler.bind(null,e))}function clickHandler(e,t){if(t.preventDefault(),t.target.classList.contains("slider__marker-button--active"))return clearInterval(slider_interval),slider_interval=setInterval(next_slide,SLIDE_SPEED),!1;slider.querySelector(".slider__marker-button--active").classList.remove("slider__marker-button--active"),t.target.classList.add("slider__marker-button--active"),clearInterval(slider_interval),get_slide(e),slider_interval=setInterval(next_slide,SLIDE_SPEED)}function get_slide(e){try{slider.querySelector(".slider-list__item--show").classList.remove("slider-list__item--show"),slides[e].classList.add("slider-list__item--show"),slider.querySelector(".slider__marker-button--active").classList.remove("slider__marker-button--active"),marker_buttons[e].classList.add("slider__marker-button--active"),current_slide_index=e}catch(e){console.log(e)}}function next_slide(){current_slide_index<slides.length-1?current_slide_index++:current_slide_index=0,get_slide(current_slide_index)}function previous_slide(){current_slide_index>0?current_slide_index--:current_slide_index=slides.length-1,get_slide(current_slide_index)}slider&&slider_init();